---
import {
  skillData,
  personalProjectData,
  workExperienceData,
  educationData,
} from "../cv";
import Header from "../../components/Header";
import Footer from "../../components/Footer";
import Head from "../../components/Head";
import "@fontsource-variable/source-code-pro";
import "@fontsource-variable/fredoka";
import "@fontsource/rubik-mono-one";

export function dateString(data: any) {
  if (data.year_s === undefined) return ``;
  if (data.year_s == data.year_e) return data.year_s;
  if (data.year_e === undefined) return `${data.year_s} -`;
  return `${data.year_s} - ${data.year_e}`;
}
---

<html lang="en">
  <head>
    <link
      rel="stylesheet"
      type="text/css"
      href=`${import.meta.env.BASE_URL}/style.css`
    />
    <link rel="sitemap" href=`${import.meta.env.BASE_URL}/sitemap-index.xml` />
    <Head />
    <meta name="generator" content={Astro.generator} />
    <title>Jared Asuncion | Work Experience</title>
  </head>
  <body>
    <main>
      <Header />
      <div class="breadcrumbs">
        <a href={`${import.meta.env.BASE_URL}/`}>Home</a>
        <span class="raquo">&raquo;</span>
        <a href="#">Work Experience</a>
      </div>
      <!-- Add other UI components here, like common headers and footers. -->
      <h1>Work Experience</h1>
      <!-- 2. Rendered HTML will be passed into the default slot. -->
      <div class="mainList">
        {
          workExperienceData.map((cvEntry) => {
            return (
              <>
                {Object.keys(cvEntry.data).map((category) => {
                  const workExperience = cvEntry.data[category];
                  const yearStartString = workExperience.year_s
                    .toString()
                    .padStart(4, "0");
                  const yearEndString =
                    workExperience.year_e == undefined
                      ? ""
                      : workExperience.year_e.toString().padStart(2, "0");
                  // const dateString = `${yearStartString} â€“ ${yearEndString}`;
                  return (
                    <>
                      <span class="monospace vertical-align-center">
                        {dateString(workExperience)}
                      </span>
                      <span class="inline-list">
                        <span class="block cv-entry-title">
                          {workExperience.position}
                        </span>
                      </span>
                      <span class="monospace hide-on-mobile">&nbsp;</span>
                      <span class="inline-list">
                        <span class="block project-subtitle">
                          {workExperience.company}
                        </span>
                        <span class="block links">
                          links:
                          {Object.keys(workExperience.url).map(
                            (urlCategory, index, arrayItself) => {
                              const url = workExperience.url[urlCategory];
                              return (
                                <>
                                  <a href={url} target="_blank">
                                    {urlCategory}
                                  </a>
                                  {index != arrayItself.length - 1 && " | "}
                                </>
                              );
                            }
                          )}
                        </span>
                        <span class="block">
                          <ul>
                            {workExperience.details.map((detail: string) => {
                              return <li>{detail}</li>;
                            })}
                          </ul>
                        </span>
                      </span>
                    </>
                  );
                })}
              </>
            );
          })
        }
      </div>
      <Footer />
    </main>
    <style>
      h2 {
        font-weight: 700;
        padding-top: 3ex;
        text-transform: capitalize;
      }

      .date {
        width: fit-content;
      }

      .mainList {
        display: grid;
        grid-template-columns: auto 1fr;
        column-gap: clamp(10px, 5vw, 30px);
      }

      .contactInfo {
        display: grid;
        grid-template-columns: 10vw 1fr;
        column-gap: clamp(10px, 5vw, 30px);
        row-gap: 1ex;
      }

      .bio {
        padding-top: 5ex;
        padding-right: 10vw;
        font-size: 20px;
        text-align: justify;
        text-align-last: left;
      }

      .bio-footnote {
        font-size: 1rem;
        opacity: 0.8;
      }

      .monospace {
        font-family: "Source Code Pro Variable", sans-serif;
        font-weight: 300;
        text-align: right;
      }

      .bold {
        font-weight: 700;
      }

      .inline-list {
        width: 100%;
        gap: 1em;
        display: block;
      }

      .vertical-align-center {
        align-self: center;
      }

      .list-entry {
        display: inline-block;
      }

      .list-entry:not(:last-of-type):after {
        content: ",";
      }

      .list-entry:not(:last-of-type) {
        margin-right: 0.5em;
      }

      .block {
        display: block;
      }

      .cv-entry-title {
        font-weight: 600;
        font-size: 1.2rem;
      }

      .project-subtitle {
        font-weight: 500;
      }

      .links {
        opacity: 0.8;
      }

      .links:hover {
        opacity: 1;
      }

      .deemphasize {
        opacity: 0.8;
        font-weight: 500;
      }

      .emphasize-by-opacity {
        opacity: 1;
      }

      .no-wrap {
        white-space: no-wrap !important;
      }

      @media screen and (max-width: 640px) {
        .mainList {
          display: grid;
          grid-template-columns: 1fr;
          padding: 0 10px;
        }

        .contactInfo {
          display: grid;
          width: 95%;
          margin-left: auto;
          grid-template-columns: auto 1fr;
          column-gap: clamp(10px, 5vw, 30px);
        }

        .monospace {
          text-align: unset;
        }

        .align-right {
          text-align: right;
        }

        .inline-list {
          padding-left: 1em;
          width: unset;
        }

        .skill-category {
          padding-top: 1.5ex;
        }

        .cv-entry-title {
          font-size: 1.2rem;
        }

        .bio {
          padding-right: 0;
        }

        .hide-on-mobile {
          display: none !important;
        }
      }
    </style>
  </body>
</html>
